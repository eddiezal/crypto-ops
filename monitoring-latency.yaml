displayName: "Cloud Run p95 latency > 2s (cryptoops-planner)"
enabled: true
combiner: "OR"
documentation:
  content: "Fires when p95 request latency > 2 seconds for 5 minutes on **cryptoops-planner**."
  mimeType: "text/markdown"
notificationChannels:
- "projects/cryptoops-sand-eddie/notificationChannels/10976207346076571760"
conditions:
- displayName: "p95 latency > 2s (5 min)"
  conditionThreshold:
    filter: 'resource.type="cloud_run_revision" AND resource.labels.service_name="cryptoops-planner" AND metric.type="run.googleapis.com/request_latencies"'
    aggregations:
    - alignmentPeriod: "60s"
      perSeriesAligner: "ALIGN_PERCENTILE_95"
      crossSeriesReducer: "REDUCE_MAX"
    comparison: "COMPARISON_GT"
    thresholdValue: 2000          # milliseconds
    duration: "300s"
    trigger:
      count: 1
alertStrategy:
  autoClose: "28800s"  # 8h
userLabels:
  service: "cryptoops-planner"
